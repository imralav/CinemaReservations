<?xml version="1.0" encoding="UTF-8"?>
<vxml version="2.1" xml:lang="pl-pl">
    <meta name="maintainer" content="imralav@gmail.com" />
    <script th:inline="javascript">
        /*<![CDATA[*/
            var date = /*[[${date}]]*/ null;
            var movieTitle = /*[[${movieTitle}]]*/ null;
        /*]]>*/
    </script>
    <form>
        <field name="choice">
            <grammar xml:lang="pl-pl" root="TIME_INDEXES">
                <rule id="TIME_INDEXES">
                    <one-of>
                        <item th:each="showing,itrStatus : ${showings}" th:inline="text">
                            [[(${itrStatus.index}+1)]]
                            <tag th:inline="javascript">
                                /*<![CDATA[*/
                                    out=/*[[${showing.id}]]*/ null;
                                /*]]>*/
                            </tag>
                        </item>
                        <item>powtórz</item>
                        <item>powrót</item>
                    </one-of>
                </rule>
            </grammar>
            <prompt>W wybranum dniu film <value expr="movieTitle"/> ma następujące seanse:</prompt>
            <prompt th:each="showing,itrStatus : ${showings}" th:text="(${itrStatus.index}+1) + ' ' + ${showing.readableTime} + '.'"></prompt>
            <prompt>Wypowiedz numer seansu, lub POWTÓRZ, by przeczytać listę seansów ponownie lub POWRÓT, by wrócić do początku rezerwacji.</prompt>
            <filled>
                <if cond="choice==='powtórz'">
                    <clear/>
                <elseif cond="choice==='powrót'"/>
                    <goto next="/cv/reservation/choicePrompt"/>
                <else/>
                    <submit next="/cv/reservation/seatsPrompt"/>
                </if>
            </filled>
            <nomatch>
                <prompt>Nie rozpoznano wyboru, proszę spróbować ponownie.</prompt>
                <reprompt />
            </nomatch>
            <noinput>
                <prompt>Nie usłyszano wyboru, proszę spróbować ponownie.</prompt>
                <reprompt />
            </noinput>
        </field>
    </form>
</vxml>